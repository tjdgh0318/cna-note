0	EventStorming		
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
1	SAGA Pattern	SAGA : 각 트랜잭션이 단일 서비스 내의 데이터를 갱신하는 일련의 로컬 트랜잭션	
		첫번째 트랜잭션이 완료되고 난 후 두번째 트랜잭션은 이전의 작업 완료에 의해 트리거 되는 방식	
		SAGA 패턴 구현 방식	
		- Event/Chreography : 각 로컬트랜잭션이 이벤트를 발생시키고 다른 서비스가 트리거 하는 방식	
		- Command/Orchestration : 오케스트레이터가 어떤 트랜잭션을 수행할 지 알려주는 방식	
			
2	DDD(Domain-Driven Design ) 적용		
		각 서비스 내에 도출된 핵심 Aggregate Root 객체를 Entity로 선언(예시 : order)	
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
		- Entity Pattern과 Repository Pattern을 적용하여 JPA를 통하여 다양한 데이터소스 유형(RDB, NoSQL)에 대한 별도 처리가 없도록 데이터 접근 어댑터 자동 생성하기 위한 Spring Data Rest의 RestRepository를 적용	
			
			
			
			
			
			
			
			
		적용 후 rest api 테스트	
		http localhost:8084/orders branchId=1 sauceId=1 qty=10 price=10000	
			
			
			
3	비동기 호출		
		Payment 서비스에서는 결제 이력에 기록을 남긴 후 곧바로 결제승인이 되었다는 이벤트를 카프카 송출	
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
		Delivery 서비스에서는 결제 승인 이벤트에 대해서 이를 수신하여 자신의 정책을 처리하도록 PolicyHandler 구현	
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
	검증	1. delivery 서비스 down : 비동기 서비스의 주문/결제 서비스 영향 파악을 위해 서비스 down	
			
			
			
			
			
			
			
			
		2. 구매주문 실행 : 정상 확인	
			http localhost:8084/orders branchId=1 sauceId=1 qty=10 price=10000
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
		3. 서비스 다운되어 있어서 delivery 서비스 조회 시 에러 발생	
			http localhost:8086/deliveries
			
			
			
			
			
			
			
			
			
		4. delivery 서비스 시작	
			
			
			
			
			
			
			
			
			
		5. delivery 서비스 조회 시 정상 확인	
			http localhost:8086/deliveries
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
4	동기 호출		
		주문 → 결제 (order → payment) 간 호출은 동기식 일관성을 유지하는 트랜잭션으로 처리	
		주문을 받은 직후(@PostPersist) 결제를 요청하도록 처리	
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
	검증		
		1. 동기식 설정에 따라 payment 서비스 중단시 500 에러 발생	
			
			
			
			
			
			
			
			
			
			
			
			
			
			
		2. payment 서비스 정상 작동시 정상 결과 출력	
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
5	CQRS		
		dashboard 통해 복수개의 서비스 이벤트 현황을 통합 조회 : Multiple Event Source	
		dashboard에서 paid, delivery 정보 view 구현	
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
	검증	dashboard 조회 결과	
			http localhost:8087/orderDashboards
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
6	API Gateway		
		API Gateway를 통해 진입점 통일. 라우팅 설정을 위해 yaml 파일 수정	
			
		applications.yml	
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
	검증	1. 포트 8088로 조회	
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
7	Ployglot		
		oder : h2 사용	
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
		delivery : hsql	
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
8	configmap		
			
			
			
			
			
			
			
			
			
			
		application.yaml	
			
			
			
			
		deployment.yaml	
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
9	운영	배포	
			
			
			
			
			
			
			
			
10	부하 테스트		
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
11	Self-healing (Liveness Probe)		
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
12		readiness probe 설정	
